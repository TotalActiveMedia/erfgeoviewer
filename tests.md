# ErfGeoviewer testsF.01 - Core functionality-------------------------### DescriptionThis feature includes the implementation of Leaflet.js, which contains the following key features:- Zoom and drag controls- Support for keyboard- Support for touch devices- Modular architecture- Support for multiple layers	- Base tile layer	- Additional tile layers	- GeoJSON features layer	- Image overlays### Tests1. I can zoom the map in and out.2. I can pan the map.3. I can pan and zoom the map using a touch device such as a mobile phone or tablet.4. I can use the keyboard to zoom and pan the map.F.02 - Markers--------------Geocoded objects from a result set that contain a point (that is, records that contain a longitude and latitude value) can be added to a map in the form of a marker. Icons are taken from open source [Maki icon set](https://github.com/mapbox/maki), and implemented using extensions to Leaflet provided by [Mapbox.js](https://github.com/mapbox/mapbox.js/), also open source.Markers are styled according to the [simplestyle specification, 1.1.0](https://github.com/mapbox/simplestyle-spec/tree/master/1.1.0). This provides the means to modify a marker's size, symbol, color, text and description. The markers support the following features:### Tests1. When I hover over a marker, I see the title of that marker.2. When I click on a marker, a detail screen appears.3. If two markers are close together on the map, they cluster together.4. The amount of markers in a cluster is indicated in the marker cluster itself. If tF.03 - Polygons---------------### DescriptionGeocoded objects from a result set that contain geometries such as polygons and lines can also be drawn on the map. These shapes have less interactivity than markers, but can be styled using the [simplestyle specification, 1.1.0](https://github.com/mapbox/simplestyle-spec/tree/master/1.1.0). This provides the means to modify a polygon's stroke (the color and thickness of the border) and its fill color.### TestsF.04 - Detail view------------------### DescriptionThe detail view appears after clicking a stored object on the map, such as a marker. The fields from that object are then shown. The site implementing the ErfGeoviewer can customize this pane by altering the configuration file. By default, the following fields will be displayed if available:- Title- Image- Description- Link to external pageWhen the object is of type "kaart", additional controls are exposed to alter an overlaid image:- Rotate/scale- Distort - Transparency### Tests1. When an image is overlaid, I can adjust the transparency.2. When an image is overlaid, I can toggle between "rotate/scale" and "distort" mode.F.05 - Legend with customizable icons-------------------------------------### DesccriptionA legend can be configured in mapmaker mode, and displayed in reader mode. It allows a user to show colored markers with an optional icon next to a editable label. If enabled, it appears in the lower left of the map in reader mode.F.06 - Configuration interface------------------------------### DescriptionA number of settings are available directly through the ErfGeoviewer interface.- Title of map- Toggle for search- Toggle for social share widget- Toggle legend- Toggle list view ("Mijn kaart")- Colors- Base map- Legend### TestsF.07 - Configuration spec-------------------------### DescriptionThe following settings can be configured through a configuration file. A template for this file is stored in version control. A developer creating an instance of the ErfGeoviewer will create a per-site version of this file. - Primary and secondary colors- Control to open a new map- Control to create a new map- Default text for "Lees meer" in detail screen- Available colors for configuring the interface via forms- Mapbox settings (optional)- Array of base tiles- Connection settings to Digitale Collectie via de Zoek en Vind API- Fields to show on detail screen### TestsF.08 - Embedding----------------### DescriptionThe "reader mode" provides a way to easily embed curated maps. - Loading JSON file- Recreation of map features (markers, polygons)- Reading configuration to enable/disable options such as the legend or map title### Tests1. I can load a stored map in "reader mode".F.09 - Integration with Data Atlas----------------------------------### Description- Users can clone an existing map into their own Data Atlas account- This creates an exact copy, which can be modified to fit the user's requirements- This feature is handled by the Data Atlas, not by the ErfGeoviewer itself.- All maps contain a "clone" action which links to the Data Atlas.### TestsThis feature was determined to be out of scope.F.10 - Timeline filter----------------------### DescriptionA slider will allow users to filter a layer based on a date range. The slider is made available by clicking a filter icon in the upperleft of the map.### Tests### NotesA normalized date is required for this feature to function properly. Due to current limitations in the API, this feature has not been entirely implemented.F.11 - Facets-------------### DescriptionUsers can reduce search results through one or more facets, which are configurable through the configuration file. By default, the exposed filters are type, collection and subject.By clicking a facet, the results are narrowed. This selction can be reset by clicking the "reset" link.### Tests- I can reduce search results by clicking on a facet- The number of results in a facet is indicated- I can remove a facet selection by clicking "reset"F.12 - Search field-------------------### DescriptionUsers can search by keyword. Pressing enter begins the search. This can also be initiated by clicking a search icon. Results can be restricted to the map's current bounding box by selecting "zoek binnen kader".### Tests### Known issuesThe API has some known issues with implementing a bounding box filter. F.13 - Search results---------------------### DescriptionThe results of the search are listed in a pane overlay before being plotted on a map. Only objects with associated spatial data are returned. These are shown in an alternative color on the map, and in the case of markers, are smaller than stored objects.### TestsF.14 - Map layers-----------------### DescriptionMarkers and image overlays are placed in separate layer groups. Markers always appear above an overlaid image.### TestsF.15 - Layouts--------------### DescriptionThe application will be designed using Marionette regions and underscore templates. This provides a flexible way to adjust the presentation of a map instance.### TestsNo tests required.F.15 - Layouts--------------### Description### TestsThis feature was not implemented.F.16 - Filter markers---------------------### DescriptionAdded 2 september 2015. Once markers are added to a map, then can later be searched through the "mijn kaart" list view. This provides a way to quickly find one marker out of a larger, pre-selected dataset. ### TestsF.17 - Welcome screen---------------------### DescriptionAdded 2 september 2015. Provides a quick overview of the application, with quick-links to start a new map or open an existing one.### Tests- I see the welcome screen when my local storage is empty.- I do not see the welcome screen after something has been saved in my session.F.18 - Drawing tools--------------------### DescriptionMarkers that are not associated with a search result can be created using the drawing tools.### Tests### NotesOther drawing tools to create elipses and polygons have been disabled to simplify the interface.F.19 - Printing---------------### DescriptionThe map has a printer-friendly version.### TestsThis feature was not implemented.F.20 - Long read view---------------------### DescriptionMarkers are linked to one another in sequential order. From the reader view, one can click on a detail view, and click "next" or "previous" to move to the detail screen of another object.### TestsF.21 - Address navigation-------------------------### DescriptionA user can search for a location on the map using an address such as "Pedro de Medinalaan 9, Amsterdam". ### TestsThis feature was not implemented. The primariy reason was that the interface for searching through the Digtiale Collectie and one to search for an address could cause some confusion.F.22 - Webrichtlijnen---------------------### DescriptionThe ErfGeoviewer will make a best effort to comply with Webrichtlijnen. ### Tests- User can navigate through menu items using the keyboard.